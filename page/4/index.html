<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.96.0"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css integrity=sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk crossorigin=anonymous><link rel=stylesheet href=/css/code_tango.css><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js integrity=sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI crossorigin=anonymous></script>
<link href=https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.js></script>
<link rel=apple-touch-icon sizes=180x180 href=https://www.scottyob.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://www.scottyob.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.scottyob.com/favicon-16x16.png><link rel=manifest href=https://www.scottyob.com/site.webmanifest><link rel=mask-icon href=https://www.scottyob.com/safari-pinned-tab.svg color><meta name=msapplication-TileColor content><meta name=theme-color content><title>Home | Scott O'Brien</title><style>@media(min-width:992px){.container{max-width:1442px}}body{background-color:#fff;background-color:#fff;color:#888;font-size:.66em;font-family:lucida grande,Verdana,Arial,Sans-Serif;line-height:1.4;margin:0;padding:0}.header{margin:4em 0}@media(min-width:768px){#sidebar{text-align:right}}#sidebar{text-transform:lowercase}#sidebar h2{font-family:lucida grande,Verdana,Arial,Sans-Serif;font-size:1.2em;text-transform:uppercase;margin:0;padding:.5em 0 .4em}#sidebar ul{list-style-type:none;margin:0;padding:0}#sidebar li:before{content:"\00BB  "}a{color:#ff7010;text-decoration:none}h1{font-size 3.2em;line-height:1em}h2{font-size:1.4em;margin-top:10px}h1,h2,h3,h4,h5{font-family:trebuchet ms,lucida grande,Verdana,Arial,Sans-Serif;font-weight:700;line-height:normal}small{font-size:1em;line-height:1.5em;background-color:inherit;color:#888}h2.pagetitle{background-color:#f0f0f0;color:inherit;padding:.5em 0 .4em .2em;margin:0 0 2em}#content{color:#484848}.leftnav{float:left;margin:0 1em}.rightnav{float:right}.snap-to-fit{clear:both;visibility:hidden}.navigation{margin:0 0 1.6em;padding:0 0 1px;font-family:lucida grande,Arial,Verdana,Sans-Serif;font-size:1.2em}.post{margin:0 0 3em}.post+.post .post__title{padding:.2em 0 0;border-top:1px solid #888}.entry{width:100%;font-size:1.2em;margin:1em 0 0;overflow:auto}blockquote{margin:1.6em 2.8em 0 1.4em;padding:0 0 0 2em;border-left:.6em solid #ddd}#footer{clear:both;margin:4em 0 1em;padding:.2em 0 0;border-top:1px solid #888;font-family:lucida grande,Arial,Verdana,Sans-Serif}</style></head><body><div id=navbar-top class=d-md-none><nav class="navbar navbar-expand-lg navbar-light bg-light"><a class=navbar-brand href=/>Posts</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNavAltMarkup aria-controls=navbarNavAltMarkup aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavAltMarkup><div class=navbar-nav><a class="nav-item nav-link" href=/page/bucketlist/>The Bucket List</a>
<a class="nav-item nav-link" href=/page/about/>About Me</a>
<a class="nav-item nav-link" href=/recipes/>Recipes</a></div></div></nav></div><div class=container id=container><div class=row><div class="col-md-9 offset-md-3"><div class=header><h1><a href=/>Scott O'Brien</a></h1><small>Projects, Ramblings and Resources of my (online) life</small></div></div></div><div class=row><div id=content class=col-md-9><div class=navigation><div class=leftnav>Â« <a href=/page/3/>Later Posts</a></div><div class=snap-to-fit></div></div><div class=post><h2 class=post__title><a href=https://www.scottyob.com/2013/12/18/throttling-guest-internet-on-apple-airport-extreme/>throttling guest internet on Apple Airport Extreme</a></h2><small>2013-12-18 13:09:03 +0000 UTC</small><div class=entry><p>Iâ€™ve been happily running my Apple Airport Extreme as m home router for the past few years (since my debian router died, and Iâ€™ve been too lazy to replace it). Â One of the cool features was the ability to create a guest network (SSID) to access the internet without being able to access your trusted network. Â One feature I wanted was the ability to throttle the speed guests can access the internet at. Â While I couldnâ€™t do this with the Airport Extreme alone, Add a Juniper SRX100 into the mix that the awesome <a href=http://cooperlees.com onclick='_gaq.push(["_trackEvent","outbound-article","http://cooperlees.com"])'>Cooper Lees</a>Â gave me into the mix and problem solved.</p><p><a href=/img/old/2013/12/apple-airport-extreme-base-station_1.jpg onclick='_gaq.push(["_trackEvent","outbound-article","http://www.scottyob.com"])'><img class="aligncenter size-full wp-image-362" alt=apple-airport-extreme-base-station_1 src=/img/old/2013/12/apple-airport-extreme-base-station_1.jpg width=600 height=450></a></p><div id=attachment_357 style=width:499px class="wp-caption aligncenter"><a href=/img/old/2013/12/photo-1.jpg onclick='_gaq.push(["_trackEvent","outbound-article","http://www.scottyob.com"])'><img aria-describedby=caption-attachment-357 class=wp-image-357 alt="SRX100, signed by the #1 Juniper Engineer" src=/img/old/2013/12/photo-1.jpg width=489 height=367></a><p id=caption-attachment-357 class=wp-caption-text>SRX100, signed by the #1 Juniper Engineer</p></div><p><a href=/img/old/2013/12/AirPort-Utility1.jpg onclick='_gaq.push(["_trackEvent","outbound-article","http://www.scottyob.com"])'><img class="aligncenter size-full wp-image-353" alt="AirPort Utility" src=/img/old/2013/12/AirPort-Utility1.jpg width=697 height=667></a></p><p><a href=/img/old/2013/12/AirPort-Utility-2.jpg onclick='_gaq.push(["_trackEvent","outbound-article","http://www.scottyob.com"])'><img class="aligncenter size-full wp-image-356" alt="AirPort Utility-2" src=/img/old/2013/12/AirPort-Utility-2.jpg width=580 height=581></a></p><p>In not so many words, performing these actions will do a number of things. Â The gig ethernet switch on the back of the airport will be bridged with the WAN port. Â Any traffic from your normal SSID(s) and switchports will be sent out the WAN port <em>untagged.</em> Â Traffic from your guest network will be sent .1q tagged with vlan 1003.</p><p>I popped this into fe-0/0/1 on my SRX100 and the following config works the magic.</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>    fe-0/0/1 {
</span></span><span style=display:flex><span>        unit 0 {
</span></span><span style=display:flex><span>            family ethernet-switching {
</span></span><span style=display:flex><span>                port-mode trunk;
</span></span><span style=display:flex><span>                vlan {
</span></span><span style=display:flex><span>                    members vlan-guest;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                native-vlan-id 3;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    vlan {
</span></span><span style=display:flex><span>        unit 0 {
</span></span><span style=display:flex><span>            family inet {
</span></span><span style=display:flex><span>                address 10.0.1.1/24;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        unit 1003 {
</span></span><span style=display:flex><span>            family inet {
</span></span><span style=display:flex><span>                filter {
</span></span><span style=display:flex><span>                    input limit_guest_upload;
</span></span><span style=display:flex><span>                    output limit_guest_download;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                address 10.0.2.1/24;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[system services]
</span></span><span style=display:flex><span>        dhcp {
</span></span><span style=display:flex><span>            pool 10.0.1.0/24 {
</span></span><span style=display:flex><span>                address-range low 10.0.1.2 high 10.0.1.199;
</span></span><span style=display:flex><span>                router {
</span></span><span style=display:flex><span>                    10.0.1.1;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            pool 10.0.2.0/24 {
</span></span><span style=display:flex><span>                address-range low 10.0.2.2 high 10.0.2.254;
</span></span><span style=display:flex><span>                router {
</span></span><span style=display:flex><span>                    10.0.2.1;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            propagate-settings fe-0/0/0.0;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[security]
</span></span><span style=display:flex><span>    nat {
</span></span><span style=display:flex><span>        source {
</span></span><span style=display:flex><span>            rule-set private-to-internet {
</span></span><span style=display:flex><span>                from zone [ guest trust ];
</span></span><span style=display:flex><span>                to zone untrust;
</span></span><span style=display:flex><span>                rule source-nat-rule {
</span></span><span style=display:flex><span>                    match {
</span></span><span style=display:flex><span>                        source-address 0.0.0.0/0;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    then {
</span></span><span style=display:flex><span>                        source-nat {
</span></span><span style=display:flex><span>                            interface;
</span></span><span style=display:flex><span>                        }
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    policies {
</span></span><span style=display:flex><span>        from-zone trust to-zone untrust {
</span></span><span style=display:flex><span>            policy trust-to-untrust {
</span></span><span style=display:flex><span>                match {
</span></span><span style=display:flex><span>                    source-address any;
</span></span><span style=display:flex><span>                    destination-address any;
</span></span><span style=display:flex><span>                    application any;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                then {
</span></span><span style=display:flex><span>                    permit;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        from-zone guest to-zone untrust {
</span></span><span style=display:flex><span>            policy guest-to-internet {
</span></span><span style=display:flex><span>                description &#34;Allows guest access to internet&#34;;
</span></span><span style=display:flex><span>                match {
</span></span><span style=display:flex><span>                    source-address any;
</span></span><span style=display:flex><span>                    destination-address any;
</span></span><span style=display:flex><span>                    application any;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                then {
</span></span><span style=display:flex><span>                    permit;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[security zones]
</span></span><span style=display:flex><span>        security-zone guest {
</span></span><span style=display:flex><span>            host-inbound-traffic {
</span></span><span style=display:flex><span>                system-services {
</span></span><span style=display:flex><span>                    dns;
</span></span><span style=display:flex><span>                    ping;
</span></span><span style=display:flex><span>                    traceroute;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            interfaces {
</span></span><span style=display:flex><span>                vlan.1003;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>firewall {
</span></span><span style=display:flex><span>    policer guest-shaping {
</span></span><span style=display:flex><span>        if-exceeding {
</span></span><span style=display:flex><span>            bandwidth-limit 500k;
</span></span><span style=display:flex><span>            burst-size-limit 300k;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        then discard;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    filter limit_guest_download {
</span></span><span style=display:flex><span>        term guest-shaping {
</span></span><span style=display:flex><span>            then {
</span></span><span style=display:flex><span>                policer guest-shaping;
</span></span><span style=display:flex><span>                accept;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    filter limit_guest_upload {
</span></span><span style=display:flex><span>        term guest-shaping {
</span></span><span style=display:flex><span>            then {
</span></span><span style=display:flex><span>                policer guest-shaping;
</span></span><span style=display:flex><span>                accept;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>vlans {
</span></span><span style=display:flex><span>    vlan-guest {
</span></span><span style=display:flex><span>        vlan-id 1003;
</span></span><span style=display:flex><span>        l3-interface vlan.1003;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    vlan-trust {
</span></span><span style=display:flex><span>        vlan-id 3;
</span></span><span style=display:flex><span>        l3-interface vlan.0;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>And there you have it! A really simple way of limiting the bandwidth of guest users on your network using the power of Junos with an Airport Extreme!</p><p>Â </p><p style=text-align:center><a href=/img/old/2013/12/photo-2.png onclick='_gaq.push(["_trackEvent","outbound-article","http://www.scottyob.com"])'><img class="aligncenter wp-image-364" alt="Throttled Speed" src=/img/old/2013/12/photo-2.png width=384 height=576></a></p></div></div><div class=post><h2 class=post__title><a href=https://www.scottyob.com/2013/04/09/what-is-anycast/>What is Anycast?</a></h2><small>2013-04-09 12:15:31 +0000 UTC</small><div class=entry><p>Iâ€™ve never found a really simple video on what exactly Anycast is with a basic examples when exploring the concepts. Â I decided to lab it up and figured this might help some of you starting out with the concepts. Â Any comments feel free to let me know!</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/YM_b_YmTRBA style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p>Config Attached for IOS lab <a title=HERE href=/img/old/2013/04/IOU_WEB_ANYCAST.zip onclick='_gaq.push(["_trackEvent","download","/img/old/2013/04/IOU_WEB_ANYCAST.zip"])'>HERE.</a></p></div></div><div class=post><h2 class=post__title><a href=https://www.scottyob.com/2012/12/08/my-experiences-of-managing-a-cisco-switch-with-puppet/>My experiences of managing a Cisco switch with Puppet</a></h2><small>2012-12-08 12:19:41 +0000 UTC</small><div class=entry><p>One recent pet gripe of mine has been having to add a new VLAN into our datacenter for our vSphere platform. Â Not that I trust my DCs switches with puppet just yet, this is a proof of concept post about how we could be using puppet to centrally manage this configuration and push it out across our DC.</p><h3 id=before>Before</h3><p>Weâ€™ve got a pretty basic topology going on in our DC, itâ€™s just a VSS with the other switches pretty much being nothing more but layer 2 for the most part. Â The dot1q trunk back to the VSS carries all VLANs from our end of row switches. Â When we add a new vlan in the DC to trunk to the ESX machines, we would add the VLAN in all the DC switches (not running VTP) then add the vlan to the trunk port on each port patched to the ESX hosts. Â (weâ€™re not using any link aggregation to the ports connected to the same ESX host, the ESX hosts themselves have their own load balancing method.. If you know any for/against doing it like this please comment and let me know)</p><h3 id=heading></h3><h3 id=setting-up-the-puppet-lab><strong>Setting up the Puppet lab</strong></h3><p>Introduced in Puppet 2.7 is <a href=http://puppetlabs.com/blog/puppet-network-device-management/ onclick='_gaq.push(["_trackEvent","outbound-article","http://puppetlabs.com"])'>network device management</a>. Â This more or less is an expect script to manage interfaces and vlans on IOS devices. Â For this lab, we will be using cisco IOU with the following topology</p><p><a href=/img/old/2012/12/IOU-Web-Interface-Laboratories.jpg onclick='_gaq.push(["_trackEvent","outbound-article","http://www.scottyob.com"])'><img class="aligncenter size-full wp-image-221" title="IOU Web Interface - Laboratories" alt src=/img/old/2012/12/IOU-Web-Interface-Laboratories.jpg width=507 height=319></a></p><h4 id=setting-up-the-devices>Setting up the Devices</h4><p>Ideally, you would have a few puppet nodes that manage a few devices each to spread out the load, for the purposes of this exercise, I created a single vm running Centos6 with both puppet-server and puppet installed. Â For this machine to manage the switches, I added the following into the device.conf file</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[dc_sw1]
</span></span><span style=display:flex><span>  type cisco
</span></span><span style=display:flex><span>  url telnet://puppet:cisco@10.0.1.131/
</span></span><span style=display:flex><span>[dc_sw2]
</span></span><span style=display:flex><span>  type cisco
</span></span><span style=display:flex><span>  url telnet://puppet:cisco@10.0.1.132/
</span></span><span style=display:flex><span>[dc_sw3]
</span></span><span style=display:flex><span>  type cisco
</span></span><span style=display:flex><span>  url telnet://puppet:cisco@10.0.1.133/
</span></span><span style=display:flex><span>[dc_sw4]
</span></span><span style=display:flex><span>  type cisco
</span></span><span style=display:flex><span>  url telnet://puppet:cisco@10.0.1.134/
</span></span></code></pre></td></tr></table></div></div><h3 id=signing-the-devices>Signing the devices</h3><p>To update the devices, you have to runÂ <strong>puppet device</strong>. Â The first time you run it, a certificate will be created that needs to be signed on the puppet master.</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>info: starting applying configuration to dc_sw4 at telnet://puppet:cisco@10.0.1.134/
</span></span><span style=display:flex><span>info: Creating a new SSL key for dc_sw4
</span></span><span style=display:flex><span>warning: peer certificate won&#39;t be verified in this SSL session
</span></span><span style=display:flex><span>info: Caching certificate for ca
</span></span><span style=display:flex><span>warning: peer certificate won&#39;t be verified in this SSL session
</span></span><span style=display:flex><span>warning: peer certificate won&#39;t be verified in this SSL session
</span></span><span style=display:flex><span>info: Creating a new SSL certificate request for dc_sw4
</span></span><span style=display:flex><span>info: Certificate Request fingerprint (md5): E8:A6:35:9D:BF:CE:3D:BC:E0:E4:C2:5B:00:CE:9F:DB
</span></span><span style=display:flex><span>warning: peer certificate won&#39;t be verified in this SSL session
</span></span><span style=display:flex><span>warning: peer certificate won&#39;t be verified in this SSL session
</span></span><span style=display:flex><span>warning: peer certificate won&#39;t be verified in this SSL session
</span></span></code></pre></td></tr></table></div></div><p>so weâ€™ll need to sign our devices</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>notice: Signed certificate request for dc_sw4
</span></span><span style=display:flex><span>notice: Removing file Puppet::SSL::CertificateRequest dc_sw4 at &#39;/var/lib/puppet/ssl/ca/requests/dc_sw4.pem&#39;
</span></span></code></pre></td></tr></table></div></div><h3 id=setting-up-the-switches-for-puppet>Setting up the switches for Puppet</h3><p>If you look up to the device configuration file, we need to create a local user for puppet to log into the switch (remember, it acts much like an expect script)</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>line vty 0 4
</span></span><span style=display:flex><span> privilege level 15
</span></span><span style=display:flex><span> password cisco
</span></span><span style=display:flex><span> login local
</span></span><span style=display:flex><span> transport input all
</span></span><span style=display:flex><span>!
</span></span></code></pre></td></tr></table></div></div><h3 id=the-configuration>The Configuration</h3><p>so with no more ado, we can easily simply abstract the behaviour of these ports using puppet syntax ðŸ™‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>
</span></span><span style=display:flex><span>        interface {
</span></span><span style=display:flex><span>                &#34;${port}&#34;:
</span></span><span style=display:flex><span>                        mode =&amp;gt; trunk,
</span></span><span style=display:flex><span>                        duplex =&amp;gt; full,
</span></span><span style=display:flex><span>                        description =&amp;gt; &#34;ESX Host&#34;,
</span></span><span style=display:flex><span>                        allowed_trunk_vlans =&amp;gt; &#34;3,4,5,8,9&#34;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>node &#34;dc_sw1&#34; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        esxport { &#39;e0/2&#39;: port =&amp;gt; &#39;Ethernet0/2&#39; }
</span></span><span style=display:flex><span>        esxport { &#39;e0/3&#39;: port =&amp;gt; &#39;Ethernet0/3&#39; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>node &#34;dc_sw2&#34; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        esxport { &#39;e1/0&#39;: port =&amp;gt; &#39;Ethernet1/0&#39; }
</span></span><span style=display:flex><span>        esxport { &#39;e1/1&#39;: port =&amp;gt; &#39;Ethernet1/1&#39; }
</span></span><span style=display:flex><span>        esxport { &#39;e1/2&#39;: port =&amp;gt; &#39;Ethernet1/2&#39; }
</span></span><span style=display:flex><span>        esxport { &#39;e1/3&#39;: port =&amp;gt; &#39;Ethernet1/3&#39; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=the-ugly>The Ugly</h4><p>A lot of the states donâ€™t yet seem to be supported by this module. Â This means even the default trunk mode of dynamic desirable will cause issues when Puppet is pulling device information and youâ€™ll have to manually specify â€œswitchport trunk encapsulation dot1qâ€ and â€œswitchport mode accessâ€ before setting puppet free on the devices.</p><h4 id=results>Results</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>info: starting applying configuration to dc_sw4 at telnet://puppet:cisco@10.0.1.134/
</span></span><span style=display:flex><span>info: Caching catalog for dc_sw4
</span></span><span style=display:flex><span>info: Applying configuration version &#39;1355007108&#39;
</span></span><span style=display:flex><span>notice: Finished catalog run in 0.20 seconds
</span></span><span style=display:flex><span>info: starting applying configuration to dc_sw3 at telnet://puppet:cisco@10.0.1.133/
</span></span><span style=display:flex><span>info: Caching catalog for dc_sw3
</span></span><span style=display:flex><span>info: Applying configuration version &#39;1355007108&#39;
</span></span><span style=display:flex><span>notice: Finished catalog run in 0.21 seconds
</span></span><span style=display:flex><span>info: starting applying configuration to dc_sw2 at telnet://puppet:cisco@10.0.1.132/
</span></span><span style=display:flex><span>info: Caching catalog for dc_sw2
</span></span><span style=display:flex><span>info: Applying configuration version &#39;1355007108&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/1]/Interface[Ethernet1/1]/description: defined &#39;description&#39; as &#39;ESX Host&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/1]/Interface[Ethernet1/1]/duplex: duplex changed &#39;auto&#39; to &#39;full&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/1]/Interface[Ethernet1/1]/mode: mode changed &#39;access&#39; to &#39;trunk&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/1]/Interface[Ethernet1/1]/allowed_trunk_vlans: defined &#39;allowed_trunk_vlans&#39; as &#39;3,4,5,8,9&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/3]/Interface[Ethernet1/3]/description: defined &#39;description&#39; as &#39;ESX Host&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/3]/Interface[Ethernet1/3]/duplex: duplex changed &#39;auto&#39; to &#39;full&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/3]/Interface[Ethernet1/3]/mode: mode changed &#39;access&#39; to &#39;trunk&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/3]/Interface[Ethernet1/3]/allowed_trunk_vlans: defined &#39;allowed_trunk_vlans&#39; as &#39;3,4,5,8,9&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/2]/Interface[Ethernet1/2]/description: defined &#39;description&#39; as &#39;ESX Host&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/2]/Interface[Ethernet1/2]/duplex: duplex changed &#39;auto&#39; to &#39;full&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/2]/Interface[Ethernet1/2]/mode: mode changed &#39;access&#39; to &#39;trunk&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/2]/Interface[Ethernet1/2]/allowed_trunk_vlans: defined &#39;allowed_trunk_vlans&#39; as &#39;3,4,5,8,9&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/0]/Interface[Ethernet1/0]/description: defined &#39;description&#39; as &#39;ESX Host&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/0]/Interface[Ethernet1/0]/duplex: duplex changed &#39;auto&#39; to &#39;full&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/0]/Interface[Ethernet1/0]/mode: mode changed &#39;access&#39; to &#39;trunk&#39;
</span></span><span style=display:flex><span>notice: /Stage[main]//Node[dc_sw2]/Esxport[e1/0]/Interface[Ethernet1/0]/allowed_trunk_vlans: defined &#39;allowed_trunk_vlans&#39; as &#39;3,4,5,8,9&#39;
</span></span><span style=display:flex><span>notice: Finished catalog run in 14.22 seconds
</span></span></code></pre></td></tr></table></div></div><h3 id=my-002>my $0.02</h3><p>I must say, Iâ€™m very disappointed in this module so far. Â It shows great promise and makes a once tedious task relatively effortless to manage, however with the time invested to find out what is and what is not supported, I think itâ€™s far too early to invest in such a solution. Â The idea of setting something like an expect script loose on my kit also worries me. Â Itâ€™s much better to have an API or a promise that the input/output the expect script uses wonâ€™t change in a future release then do something unexpected (pun intended there.)</p><p>I guess if we were using an OS like Junos we could have <a href=http://www.swarm-logic.com/content/quick-way-configure-interface-ranges-juniper-switches-junos-tips onclick='_gaq.push(["_trackEvent","outbound-article","http://www.swarm-logic.com"])'>created apply-groups like this</a>Â to abstract the configuration in much the same manner, at least down to the switch level. Â Very interesting for a new take on managing these things though</p><h2 id=span-stylecolor-ff6600editspan><span style=color:#f60>EDIT:</span></h2><p>Iâ€™ve been thinking about this a lot since I posted it.Â  I think I was too harsh on the tool.Â  It seems even Ciscoâ€™s own tools work by sshâ€™ing into the box to make their changes.. while not ideal, for these old IOS devices around, it seems to be the accepted thing to do.Â  Itâ€™s exciting times ahead in this space though, I can feel it!</p></div></div><div class=post><h2 class=post__title><a href=https://www.scottyob.com/2012/11/08/address-book-for-a-the-blind/>Address Book For the Blind</a></h2><small>2012-11-09 00:32:51 +0000 UTC</small><div class=entry><p>This article is about using the <a href=http://www.asterisk.org onclick='_gaq.push(["_trackEvent","outbound-article","http://www.asterisk.org"])'>Asterisk PBX</a> and exploiting <a href=http://www.google.com/insidesearch/features/voicesearch/index.html onclick='_gaq.push(["_trackEvent","outbound-article","http://www.google.com"])'>Googleâ€™s voice recognition </a>API built for voice search in Chrome to build an address book that technology inept people (my grandmother) can use to place cheap telephone calls over VoIP.</p><p>This tool is built for my grandmother; a lady who hasÂ <a href=http://www.mdfoundation.com.au onclick='_gaq.push(["_trackEvent","outbound-article","http://www.mdfoundation.com.au"])'>macular degeneration</a>Â making her legally blind. Â She doesnâ€™t want to invest a great deal of money in this solution or have much of a learning curve, it took long enough to get her using the two button audio book solution on the iPod. Â </p><p>The basic idea is to purchase a direct inward dialing (DID) number and program it into her speed dial, this will connect to an Asterisk virtual machine that will launch the voice recognition to listen to who she wants to dial, look up the number in her address book then connect the call through, all at the rate of about $0.11 for a national call (actually saving her money!).</p><p>Iâ€™m using the <a href=http://zaf.github.com/asterisk-speech-recog/ onclick='_gaq.push(["_trackEvent","outbound-article","http://zaf.github.com"])'>Speech Recognition for Asterisk</a> module to convert the spoken recording to a string. Â The problem with the method using this library for an address books is different words being returned that are pronounced very similar to the names in the book, for instance trying to find the name â€˜elmerâ€™ returned â€˜Almaâ€™. Â With a bit of python scripting to use <a href=http://www.doughellmann.com/articles/how-tos/phonetic-hashing/index.html onclick='_gaq.push(["_trackEvent","outbound-article","http://www.doughellmann.com"])'>fuzzy matching to search by sound with python</a>Â we can start to compare what our speech recognition engine returned with what we actually have in our address book. It must be noted that this method only works for a small set of different numbers in an address book, which although fits my grandmother fine, I plan to script the server so I can always make that magic button (DID speed dial) re-direct the call to anywhere I like.</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span> dmetaphone = fuzzy.DMetaphone(3)
</span></span><span style=display:flex><span> dmetaphone(&#39;Alma&#39;)
</span></span><span style=display:flex><span>[&#39;ALM&#39;, None]
</span></span><span style=display:flex><span> dmetaphone(&#39;Elmer&#39;)
</span></span><span style=display:flex><span>[&#39;ALM&#39;, None]
</span></span><span style=display:flex><span> dmetaphone(&#39;Toss&#39;)
</span></span><span style=display:flex><span>[&#39;TS&#39;, None]
</span></span><span style=display:flex><span> dmetaphone(&#39;Scott&#39;)
</span></span><span style=display:flex><span>[&#39;SKT&#39;, None]
</span></span><span style=display:flex><span> dmetaphone(&#39;Troy&#39;)
</span></span><span style=display:flex><span>[&#39;TR&#39;, None]
</span></span><span style=display:flex><span> dmetaphone(&#39;Sue&#39;)
</span></span><span style=display:flex><span>[&#39;S&#39;, None]
</span></span><span style=display:flex><span> dmetaphone(&#39;Janet&#39;)
</span></span><span style=display:flex><span>[&#39;JNT&#39;, &#39;ANT&#39;]
</span></span></code></pre></td></tr></table></div></div><p>So, to execute the plan, Iâ€™m using an account on <a href=https://www.mynetfone.com.au onclick='_gaq.push(["_trackEvent","outbound-article","http://www.mynetfone.com.au"])'>Mynetfone</a>. Â The extensions.conf has a script to answer the call on my purchased DID, prompt for who she wants to talk to, run it through speech recognition, then call the number in her address book through a python script. Â The extensions.conf that makes this magic happen looks like this:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>; Phone call is made to the service, welcome user and get their speech
</span></span><span style=display:flex><span>exten = 0920xxxx,1,Answer()
</span></span><span style=display:flex><span>exten = 0920xxxx,1,Wait(2)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,agi(googletts.agi, &#34;Hello Miss Duckworth&#34;, en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,agi(googletts.agi, &#34;I am here to attempt to make your social life easier.&#34;, en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n(intro),agi(googletts.agi, &#34;Who would you like to talk to?&#34;, en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,agi(speech-recog.agi, en-US)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; Look up number in address book, write debug information then go to the required section
</span></span><span style=display:flex><span>exten = 0920xxxx,n,agi(address-book.agi,${utterance})
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Verbose(1,The text you just said is: ${utterance})
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Verbose(1,The probability to be right is: ${confidence})
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Verbose(1, ${foundname})
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Verbose(1, ${todial})
</span></span><span style=display:flex><span>exten = 0920xxxx,n,GotoIf($[&#34;${foundname}&#34; = &#34;1&#34;]?success:fail)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; Name not found in the address book
</span></span><span style=display:flex><span>exten = 0920xxxx,n(fail),agi(googletts.agi,&#34;Sorry, I could not find the person ${utterance} in the address book&#34;, en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,agi(googletts.agi, &#34;Please feel free to try again&#34;,en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Goto(intro)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; Connect the user through the MyNetFone service.
</span></span><span style=display:flex><span>exten = 0920xxxx,n(success),agi(googletts.agi, &#34;Please hold while I connect you to&#34;, en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,agi(googletts.agi, &#34;${utterance}&#34;, en)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Dial(SIP/MyNetFone/${todial}, 30)
</span></span><span style=display:flex><span>exten = 0920xxxx,n,Hangup()
</span></span></code></pre></td></tr></table></div></div><p>and the python script address-book.agi file:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>
</span></span><span style=display:flex><span>import sys
</span></span><span style=display:flex><span>import fuzzy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Read and ignore AGI environment (read until blank line)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>addressBook = {
</span></span><span style=display:flex><span>   &#39;scott&#39;: &#39;0415xxxxxx&#39;,
</span></span><span style=display:flex><span>   &#39;susan&#39;: &#39;98xxxxxx&#39;,
</span></span><span style=display:flex><span>   &#39;support&#39;: &#39;181&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dmetaphone = fuzzy.DMetaphone(3)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>env = {}
</span></span><span style=display:flex><span>tests = 0;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>while 1:
</span></span><span style=display:flex><span>   line = sys.stdin.readline().strip()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   if line == &#39;&#39;:
</span></span><span style=display:flex><span>      break
</span></span><span style=display:flex><span>   key,data = line.split(&#39;:&#39;)
</span></span><span style=display:flex><span>   if key[:4] &amp;lt; &#39;agi_&#39;:
</span></span><span style=display:flex><span>      #skip input that doesn&#39;t begin with agi_
</span></span><span style=display:flex><span>      sys.stderr.write(&#34;Did not work!\n&#34;);
</span></span><span style=display:flex><span>      sys.stderr.flush()
</span></span><span style=display:flex><span>      continue
</span></span><span style=display:flex><span>   key = key.strip()
</span></span><span style=display:flex><span>   data = data.strip()
</span></span><span style=display:flex><span>   if key &amp;lt; &#39;&#39;:
</span></span><span style=display:flex><span>      env[key] = data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>spokenWord = dmetaphone(env[&#39;agi_arg_1&#39;])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>for name in addressBook:
</span></span><span style=display:flex><span>   if dmetaphone(name) == spokenWord:
</span></span><span style=display:flex><span>      print &#39;SET VARIABLE todial &#34;%s&#34;&#39; % addressBook[name]
</span></span><span style=display:flex><span>      print &#39;SET VARIABLE foundname &#34;1&#34;&#39;
</span></span><span style=display:flex><span>      sys.exit(0)
</span></span><span style=display:flex><span>print &#39;SET VARIABLE foundname &#34;0&#34;&#39;
</span></span></code></pre></td></tr></table></div></div></div></div><div class=navigation><div class=rightnav><a href=/page/5/>Earlier Posts</a> Â»</div><div class=snap-to-fit></div></div><div id=footer>Made with <a href=https://gohugo.io/>Hugo</a>. Theme half-milk inspired by <a href=http://thortz.com/skimmed-milk/>skimmed-milk</a></div></div><div id=sidebar class="col-md-3 order-md-first d-none d-md-block"><h2>Other Pages</h2><ul><li><a href=/page/bucketlist/>The Bucket List</a></li><li><a href=/page/about/>About Me</a></li><li><a href=/recipes/>Recipes</a></li></ul></div></div></div></body></html>