<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>mini-cnc - Scott O'Brien</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css><link rel=stylesheet type=text/css href=/assets/css/normalize.css><link rel=stylesheet type=text/css href=/assets/css/icons.css><link rel=stylesheet type=text/css href=/assets/css/screen.css><link href="https://fonts.googleapis.com/css?family=Bree+Serif|Lato:100,100i,300,300i,400,400i,700,700i|Source+Code+Pro:300,400,500,700" rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js></script>
<script type=text/javascript src=/assets/bigfoot/dist/bigfoot.js></script>
<link rel=stylesheet type=text/css href=/assets/bigfoot/dist/bigfoot-number.css><script type=text/javascript>$.bigfoot()</script></head><body class=post-template><header class=main-header><div class=main-header-content><h1 class=blog-title><a href=/>Scott O'Brien</a></h1><h2 class=blog-description>Projects, Ramblings and Resources of my (online) life</h2></div><div class=nav><a class=nav- role=presentation href=/page/bucketlist/>The Bucket List</a>
<a class=nav- role=presentation href=/page/about/>About Me</a>
<a class=nav- role=presentation href=/recipes/>Recipes</a>
<a class=nav- role=presentation href=/flying/>Flying</a></div></header><main class=content role=main><article class=post><header class=post-header><img src=/post/mini-cnc/logo.jpg></img><h2 class=post-title>mini-cnc</h2><section class=post-meta><time class=post-date>December 28, 2022</time></section></header><section class=post-content><p>After <a href=/post/ardupilot-postmortem/>crashing my RC Plane</a> I decided to experiment with the flight controller using the cheapest possible RC planes I could build.</p><p>I bought foam board from Dollar Tree. Having the free designs from Flite Test (I’m using their <a href=https://www.flitetest.com/articles/diy-ft-simple-cub-build>Simple Cub</a>), it quickly became apparent that printing out the designs, cutting, lining them up, gluing, cutting takes hours and hours to cut out a design.</p><p>I want a CNC machine to do either laser cutting or sawing to save this time. I don’t have very much space in my apartment though. The goal of this project is to design and build a “mini CNC” machine, that can be used to work on a much larger surface by subdividing it into many smaller jobs. For this to work, we’ll place the small CNC machine on the larger surface, then have a way of measuring the position and orientation relative to the much larger surface.</p><h2 id=options>Options</h2><p>When it comes to measuring position, there are a few options. ChatGPT says:</p><p><img src=chatgpt.jpg alt=chatgpt></p><p>My goal is to attempt to do this with just a Vision System:</p><iframe width=560 height=315 src=https://www.youtube.com/embed/kP53Sx1OHHE title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h3 id=computer-vision-with-opencv>Computer Vision with OpenCV</h3><p>My hope was that I could use OpenCV’s ArUco markers to perform the vision system measurement. Although calibrating the camera with a lot more images helped a great deal, I found that the median measurement was off by 1.7cm. Far, far too great for this project to work.</p><ul><li><a href=https://gist.github.com/scottyob/25eb62f75cab4d118e297b93f7f9acfe>Calibrate Script</a></li><li><a href=https://gist.github.com/scottyob/331027d9f06431d32395281d47b5f27b>Measure Script</a></li></ul><iframe width=560 height=315 src=https://www.youtube.com/embed/r8fBJO7SEhI title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>After taking a heap of frames from the camera, the distance was terribly inaccurate.</p><p>It could be because of the continuity camera, but I found the median was off. 50.8cm should be the correct measurement, however, the results speak for themselves.</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>           length
</span></span><span style=display:flex><span>count  239.000000
</span></span><span style=display:flex><span>mean    52.604118
</span></span><span style=display:flex><span>std      2.077757
</span></span><span style=display:flex><span>min     46.797939
</span></span><span style=display:flex><span>25%     51.159442
</span></span><span style=display:flex><span>50%     52.506212
</span></span><span style=display:flex><span>75%     53.816030
</span></span><span style=display:flex><span>max     60.835761
</span></span></code></pre></td></tr></table></div></div><h3 id=arkit>ARKit.</h3><p>The second experiment, is going to be using a modern iPhone using ARKit. This has a number of advantages, as, we should be able to use the advanced Vision System to find the location, and the Inertial Measurement IMU with the point cloud tracking or whatever other magic they do to be able to find better measurements. Hopefully this will yield more accurate results. It will be expensive, but hopefully using phones that a lot of the population has on hand now.</p><p>Stay tuned for how this performs!</p></section><footer class=post-footer><section class="tags post-meta">Tagged
<a href=https://www.scottyob.com/tags/opencv/>opencv</a>
<a href=https://www.scottyob.com/tags/ios/>ios</a>
<a href=https://www.scottyob.com/tags/arkit/>arkit</a></section></footer></article></main><footer class=site-footer><section class=rss><a class="subscribe-button icon-feed" href=/index.xml></a></section><section class=copyright>&copy; 2023 Scott O'Brien</section><section class=poweredby><a href=https://github.com/nirocfz/arabica>Arabica</a> theme by Sean Lunsford. Published with <a href=https://gohugo.io>Hugo</a>.</section></footer></body></html>